<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>displacementImage</title>
    <style>
        body {
            margin: 0;
        }

        #canvas--wrap {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>

<body>

    <div id="canvas--wrap"></div>

    <script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>

    <script src="./js/three.min.js"></script>
    <script src="./js/hover.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
    <script src="./js/canvasSlideshow.js"></script>
    <script src="./js/pixi.min.js"></script>
    <script>

        // code from https://tympanus.net/codrops/2018/04/10/webgl-distortion-hover-effects/
        // imagesLoaded(document.querySelectorAll('img'), () => {
        //     document.body.classList.remove('loading');
        // });

        // Array.from(document.querySelectorAll('.img-wrap')).forEach((el) => {
        //     const imgs = Array.from(el.querySelectorAll('img'));
        //     new hoverEffect({
        //         parent: el,
        //         intensity: el.dataset.intensity || undefined,
        //         speedIn: el.dataset.speedin || undefined,
        //         speedOut: el.dataset.speedout || undefined,
        //         easing: el.dataset.easing || undefined,
        //         hover: el.dataset.hover || undefined,
        //         image1: imgs[0].getAttribute('src'),
        //         image2: imgs[1].getAttribute('src'),
        //         displacementImage: './images/1.jpg'
        //     });
        // });

        // var spriteImages = document.querySelectorAll('.img-wrap img');
        // var spriteImagesSrc = [];
        // var texts = [];

        // console.log('spriteImages', spriteImages);

        // for (var i = 0; i < spriteImages.length; i++) {

        //     var img = spriteImages[i];

        //     if (img.nextElementSibling) {
        //         texts.push(img.nextElementSibling.innerHTML);
        //     } else {
        //         texts.push('');
        //     }

        //     spriteImagesSrc.push(img.getAttribute('src'));
        // }

        spriteImagesSrc = ['./images/call_main.jpg', 'L1002736-1.jpg', './images/moon_top-1.jpg', './images/sakura_03-1.jpg', './images/thumbnail_autumn2020-1.jpg']
        var initCanvasSlideshow = new CanvasSlideshow({
            sprites: spriteImagesSrc,
            displacementImage: './images/clouds.jpg',
            autoPlay: false,
            autoPlaySpeed: [0.3, 0.3],
            displaceScale: [800, 500],
            displaceAutoFit: true,
            displacementCenter: true,
            interactive: false,
            interactionEvent: 'click', // 'click', 'hover', 'both'
        });
        setInterval(function () {
            initCanvasSlideshow.nextSlide();
        }, 5000);
    </script>
</body>

</html>